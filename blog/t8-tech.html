<!DOCTYPE html>
<head>
  <!-- Insert page title & ensure it matches post title -->
  <title id="title">Getting Started with Regular Expressions</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="../stylesheets/blog-stylesheet-keyboard.css">

  <link href='http://fonts.googleapis.com/css?family=Open+Sans|Roboto' rel='stylesheet' type='text/css'>
</head>

<header>
  <a href="../index.html">
    <figure>
      <img id="jq-key" class="top-keys" src="../assets/keys/JQ.png">
      <figcaption>Home</figcaption>
    </figure>
  </a>
  <a href="allposts.html">
    <figure>
      <img id="b-key" class="top-keys" src="../assets/keys/B_key.png">
      <figcaption>All Posts</figcaption>
    </figure>
  </a>
</header>

<main>
  <!-- Insert title below -->
  <h1 id="post_title">(This gets replaced through JS magick)</h1>
  <!-- Subtitle, if you want it -->
  <h3>In Ruby</h3>
  <!-- Date -->
  <h4>2015.6.19</h4>

  <section>
    <p>
      A <a href="http://ruby-doc.org/core-2.2.0/Regexp.html">regular expression</a> is a sequence of characters that define a search pattern, mainly used for matching patterns within strings. They are especially useful when we want to find and replace lots of small bits of text.
    </p>
    <p>
      While regular expressions can be a nifty way to replace text quickly and reliably, they can also be a cryptic soup of symbols sure to bewilder anyone without a RegEx fetish. 
    </p>

    <p>
      Many of the guides to RegExes that can be found out there online (like <a href="http://www.tutorialspoint.com/ruby/ruby_regular_expressions.htm">these</a> <a href="http://www.tutorialspoint.com/javascript/javascript_regexp_object.htm">at</a> TutorialsPoint and <a href="http://www.geocities.jp/kosako3/oniguruma/doc/RE.txt">this</a> by Oniguruma) contain too much information and not enough examples. So here I aim to walk through some of the more important uses of regular expressions an example at a time. Once we're done, you may even find yourself with a new RegEx fetish (or something scarily close).
    </p>
    <p>
      Easily the most helpful resource I've found on regular expressions in Ruby is <a href="http://rubular.com/">Rubular</a>. It's a web app that allows you to interactively type in a string and a regex and see which bits of the string are getting selected. At the bottom of the page is there's also a manageable cheat sheet that provided most of the guidance for these examples.
    </p>
    <p>
      As a first example, we can start with the formula
    </p>
    <pre><code>fd = "the quick brown fox jumps over the lazy dog"</code></pre>

    <h3>Formatting regexes</h3>
    <p>
      Ruby regexes are formatted with a slash on both sides. So if I want to match <code>u</code> inside the string <code>fd</code>, I can use the regex <code>/u/</code>.
    </p>

    <h3>Which methods use regexes?</h3>
    <p>
      <a href="http://ruby-doc.org/core-2.2.0/Regexp.html">Many</a>. But here are some of the most commonly used ones:
    </p>
    <table>
      <tr>
        <th>method or operator</th>
        <th>description</th>
        <th>example</th>
      </tr>
      <tr class='alt'>
        <td><code>=~</code></td>
        <td><small>matches a regex to a string, returning the index at which it is first found</small></td>
        <td><code>/q/ =~ 'unquestionably' # => 2</code></td>
      </tr>
      <tr>
        <td><code>match</code></td>
        <td><small>matches a regex to a string, returning a MatchData object representing the first match</small></td>
        <td><code>/q/.match('unquestionably') # => #&lt;MatchData "q"&gt;</code></td>
      </tr>
      <tr class='alt'>
        <td><code>sub</code></td>
        <td><small>substitutes the first match<small></td>
        <td><code>voodoo'.sub(/o/,'@') # => "v@odoo"</code></td>
      </tr>
      <tr>
        <td><code>gsub</code></td>
        <td><small>substitutes all matches</small></td>
        <td><code>'voodoo'.gsub(/o/,'@') # => "v@@d@@"</code></td>
      </tr>
      <tr class='alt'>
        <td><code>scan</code></td>
        <td><small>creates an array from all matches</small></td>
        <td><code>'voodoo'.scan(/o/) # => ['o','o','o','o']</code></td>
      </tr>
    </table>

    <h3>Varieties of regexes</h3>
    <p>
      Above we've just seen examples of a simple-string match, like
    </p>
    <pre><code>fd.gsub(/o/,"@")
# => "the quick br@wn f@x jumps @ver the lazy d@g"</code></pre>

    <p>
      which can also be multiple characters, such as
    </p>
<pre><code>fd.gsub(/n fox/,"@")
# => "the quick brow@ jumps over the lazy dog"</code></pre>
    <p>
      To match any from a grab-bag of characters, we can use the brackets (<code>[]</code>) inside our regex:
    </p>
<pre><code>fd.gsub(/[qjld]/,"@")
# => "the @uick brown fox @umps over the @azy @og"</code></pre>
<pre><code>fd.gsub(/[aeiou]/,"@")
# => "th@ q@@ck br@wn f@x j@mps @v@r th@ l@zy d@g"</code></pre>
     <p>
      And to match anything from outside the grab bag, we just put a carat (<code>^</code>) inside the front of that:
    </p>
<pre><code>fd.gsub(/[^aeiou]/,"@")
# => "@@e@@ui@@@@@o@@@@o@@@u@@@@o@e@@@@e@@a@@@@o@"</code></pre>
<pre><code>fd.gsub(/[^aeiou ]/,"@")
# => "@@e @ui@@ @@o@@ @o@ @u@@@ o@e@ @@e @a@@ @o@"</code></pre>
    <p>
      And we can select any of a range of alphanumeric characters from the string:
    </p>
<pre><code>fd.gsub(/[a-c]/,"@")
# => "the qui@k @rown fox jumps over the l@zy dog"</code></pre>
    <p>
      We can even put multiple ranges within the same brackets:
    </p>
<pre><code>fd.gsub(/[a-cx-z]/,"@")
# => "the qui@k @rown fo@ jumps over the l@@@ dog"</code></pre>
    <p>
      The curly brackets allow us to select exactly the specified number of occurrences of the searched-for regex:
    </p>
<pre><code>'voodooooooo'.gsub(/o{3}/,"@")
# => "vood@@o"</code></pre>
    <p>
      whereas if we add a comma, it searches for <i>at least</i> that many.
    </p>
<pre><code>'voodooooooo'.gsub(/o{3,}/,"@")
# => "vood@"</code></pre>
    <p>
      There's much more to learn, but that should do it for an example-driven introduction.
    </p>

    <h3>#<code>gsub</code></h3>
    <p>
      It's worth noting the flexibility of <code>gsub</code>, since it <a href="http://ruby-doc.org/core-2.1.4/String.html#method-i-gsub">can be called in four different formats</a>. We've already seen the first one,
    </p>
    <h4>1. gsub(pattern, replacement) → new_str</h4>
    <p>
      But we have yet to focus on the other three. Here are some examples of those.
    </p>
    <h4>2. gsub(pattern, hash) → new_str</h4>
<pre><code>fd.gsub(/[aeiou]/,{'a' => 1,'e' => 2, 'i' => 3, 'o' => 4, 'u' => 5})
# => "th2 q53ck br4wn f4x j5mps 4v2r th2 l1zy d4g"</code></pre>
    <h4>3. gsub(pattern) {|match| block } → new_str</h4>
<pre><code>fd.gsub(/[aeiou]/) {|x| x.upcase}
# => "thE qUIck brOwn fOx jUmps OvEr thE lAzy dOg"</code></pre>
    <h4>4. gsub(pattern) → enumerator</h4>
<pre><code>enum = fd.gsub(/[aei]/)
# => #&lt;Enumerator: ...&gt;
enum.next # => "e"
enum.next # => "i"
enum.next # => "e"
enum.next # => "a"
enum.next # StopIteration: iteration reached an endcode>

enum.each_with_index {|el,idx| puts "#{idx}: #{el}"}
# 0: e
# 1: i
# 2: e
# 3: e
# 4: a
# => "th quck brown fox jumps ovr th lzy dog"
fd
# => "the quick brown fox jumps over the lazy dog"</code></pre>

  </section>
</main>

<a id="h5footer" href="../blog/allposts.html"><h4>Back to All Technication Posts</h4></a>
<script src="../js/replacetitle.js"></script>